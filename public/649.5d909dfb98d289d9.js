"use strict";(self.webpackChunkGestorIncidentesFront=self.webpackChunkGestorIncidentesFront||[]).push([[649],{6649:(pe,A,c)=>{c.r(A),c.d(A,{IncidentesModule:()=>re});var l=c(4755),a=c(5030),U=c(5349),q=c(1041),v=c(2889),e=c(3020),Z=c(7501),M=c(5226),h=c.n(M),p=c(3144),S=c(4766),g=c(262),_=c(9646);let T=(()=>{class t{constructor(){this.baseUrl=S.N.baseUrl,this.http=(0,e.f3M)(p.eN),this.ApiUrl="api/incidentes"}getIncidentes(){return this.http.get(`${this.baseUrl}/${this.ApiUrl}`).pipe((0,g.K)(i=>(0,_.of)(i.error.msg)))}getIncidentesPorUsuario(n,i,d,s){const r=`${this.baseUrl}/api/buscar/incidentesUsuario/${n}?tipoIncidente=${i}&estadoIncidente=${d}&estado=${s}`,u=(new p.WM).set("x-token",localStorage.getItem("x-token")||"");return this.http.get(r,{headers:u}).pipe((0,g.K)(f=>(0,_.of)(f.error.msg)))}getIncidentesPorTipoEstado(n,i,d){const s=`${this.baseUrl}/api/buscar/incidentesTipoEstado/${n}?estadoIncidente=${i}&estado=${d}`,r=(new p.WM).set("x-token",localStorage.getItem("x-token")||"");return this.http.get(s,{headers:r}).pipe((0,g.K)(u=>(0,_.of)(u.error.msg)))}getIncidentePorId(n){return this.http.get(`${this.baseUrl}/${this.ApiUrl}/${n}`).pipe((0,g.K)(i=>(0,_.of)(i.error.msg)))}agregarIncidente(n){const i=`${this.baseUrl}/${this.ApiUrl}`,d=(new p.WM).set("x-token",localStorage.getItem("x-token")||"");return this.http.post(i,n,{headers:d})}actualizarIncidente(n){const i=`${this.baseUrl}/${this.ApiUrl}/${n.id}`,d=(new p.WM).set("x-token",localStorage.getItem("x-token")||"");return this.http.put(i,n,{headers:d})}borrarIncidente(n){const i=`${this.baseUrl}/${this.ApiUrl}/${n}`,d=(new p.WM).set("x-token",localStorage.getItem("x-token")||"");return this.http.delete(i,{headers:d})}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var O=c(1937),N=c(9879),E=c(8225);function k(t,o){1&t&&(e.TgZ(0,"h1",35),e._uU(1," Editar Incidente "),e.qZA())}function J(t,o){1&t&&(e.TgZ(0,"h1",35),e._uU(1," Registrar Incidente "),e.qZA())}function y(t,o){1&t&&(e.TgZ(0,"div",36)(1,"div",11),e._UZ(2,"input",37),e.TgZ(3,"label",22),e._uU(4,"Id:"),e.qZA()()())}function Q(t,o){if(1&t&&(e.TgZ(0,"option",38),e._uU(1),e.qZA()),2&t){const n=o.$implicit;e.Q6J("value",n.id),e.xp6(1),e.hij(" ",n.tinc_nombre," ")}}function F(t,o){if(1&t&&(e.TgZ(0,"option",38),e._uU(1),e.qZA()),2&t){const n=o.$implicit;e.Q6J("value",n.id),e.xp6(1),e.hij(" ",n.est_nombre," ")}}function $(t,o){1&t&&(e.TgZ(0,"label",41),e._uU(1,"Estado Incidente:"),e.qZA())}function L(t,o){if(1&t&&(e.TgZ(0,"div",23)(1,"div",20)(2,"select",39)(3,"option",25),e._uU(4,"Seleccionar opci\xf3n"),e.qZA(),e.YNc(5,F,2,2,"option",26),e.qZA(),e.YNc(6,$,2,0,"label",40),e.qZA()()),2&t){const n=e.oxw();e.xp6(5),e.Q6J("ngForOf",n.EstadoIncidentes),e.xp6(1),e.Q6J("ngIf",n.esAdmin)}}function Y(t,o){1&t&&(e.TgZ(0,"span"),e._uU(1,"Actualizar"),e.qZA())}function R(t,o){1&t&&(e.TgZ(0,"span"),e._uU(1,"Registrar"),e.qZA())}let P=(()=>{class t{constructor(){this.fb=(0,e.f3M)(a.qu),this.tipoIncidentesService=(0,e.f3M)(O.O),this.estadoIncidentesService=(0,e.f3M)(E.s),this.authService=(0,e.f3M)(Z.e),this.validatorService=(0,e.f3M)(N.S),this.incidentesService=(0,e.f3M)(T),this.TipoIncidentes=[],this.EstadoIncidentes=[],this.closeModal=new e.vpe,this.OnIncidente=!1,this.miFormulario=this.fb.group({id:[0],nombre:["",[a.kI.required]],descripcion:["",[a.kI.required]],estado:[!0,[a.kI.required]],estadoIncidenteId:[0,[a.kI.required]],tipoIncidenteId:[0,[a.kI.required]],usuarioId:[1,[a.kI.required]],usuarioRevisionId:[1,[a.kI.required]]})}ngOnInit(){this.obtenerTipoIncidentes(),this.obtenerEstadoIncidentes(),this.esAdmin="ADMIN_ROLE"===this.authService.role(),this.usuarioRegistro=this.authService.usuarioLogueado()}ngOnChanges(n){if(this.OnIncidente=void 0!==this.IncidenteInput,!0===this.OnIncidente){let{id:i,inc_nombre:d,inc_descripcion:s,inc_estado:r,inc_usuarioId:u,inc_tipoIncidenteId:b,inc_estadoIncidenteId:I,inc_usuarioRevisionId:le}=this.IncidenteInput;if("MONGO"===this.BDIncidente){const{idMYSQL:ue}=this.IncidenteInput;i=ue}this.miFormulario.setValue({id:i,nombre:d,descripcion:s,estado:r,tipoIncidenteId:b,estadoIncidenteId:I,usuarioId:u,usuarioRevisionId:le})}}obtenerTipoIncidentes(){this.tipoIncidentesService.getTipoIncidentes().subscribe(({tipoIncidentesMy:n,tipoIncidentesMo:i})=>{this.TipoIncidentes="MONGO"===this.BDIncidente?i:n})}obtenerEstadoIncidentes(){this.estadoIncidentesService.getEstadoIncidentes().subscribe(({estadoIncidentesMy:n})=>{this.EstadoIncidentes=n})}onSubmit(){let{nombre:n,descripcion:i,estadoIncidenteId:d,tipoIncidenteId:r,usuarioId:u,usuarioRevisionId:f}=this.miFormulario.value;if(this.miFormulario.invalid)return void this.miFormulario.markAllAsTouched();let b={inc_nombre:n,inc_descripcion:i,inc_estadoIncidenteId:d,inc_tipoIncidenteId:r,inc_usuarioId:u,inc_usuarioRevisionId:f};if(!0===this.OnIncidente){let m={id:this.IncidenteInput.id,inc_nombre:n,inc_descripcion:i,inc_estadoIncidenteId:d,inc_tipoIncidenteId:r,inc_usuarioId:u,inc_usuarioRevisionId:f};console.log("Incidente a Actualizar",m),this.incidentesService.actualizarIncidente(m).subscribe(I=>{h().fire("Incidente Actualizado",I.msg,"success").then(x=>{x.isConfirmed&&location.reload()})})}else console.log("Incidente a registrar",b),this.incidentesService.agregarIncidente(b).subscribe(m=>{h().fire(`Incidente Registrado ,Numero de Turno ${m.incidente.id}`,m.msg,"success").then(I=>{I.isConfirmed&&location.reload()})})}cerrarModal(){this.closeModal.emit(!1),this.IncidenteInput=void 0,this.miFormulario.reset()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-incidenteModal"]],inputs:{IncidenteInput:"IncidenteInput",BDIncidente:"BDIncidente",esAdmin:"esAdmin"},outputs:{closeModal:"closeModal"},features:[e.TTD],decls:51,vars:12,consts:[["id","Modal","tabindex","-1","aria-labelledby","Modal","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["class","modal-title fs-5 m-0","id","exampleModalLabel",4,"ngIf"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"row","mb-3"],["class","col-3 col-sm-3 m-0 p-0",4,"ngIf"],[1,"col","m-0","p-0"],[1,"form-floating"],["type","text","id","usuarioNombre","required","",1,"form-control-plaintext",3,"value"],["for","usuarioNombre",1,"form-label"],["type","text","id","usuarioDependencia","required","",1,"form-control-plaintext",3,"value"],["for","usuarioDependencia",1,"form-label"],[1,"col-12","col-sm-6","m-0","p-0"],["type","text","id","usuarioCorreo","required","",1,"form-control-plaintext",3,"value"],["for","usuarioCorreo",1,"form-label"],[1,"col-12"],[1,"mb-3","form-floating"],["type","text","id","nombre","formControlName","nombre","required","",1,"form-control"],["for","nombre",1,"form-label"],[1,"col-12","col-sm"],["id","tipoIncidenteId","formControlName","tipoIncidenteId","required","",1,"form-select"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","tipoIncidente"],["class","col-12 col-sm",4,"ngIf"],[1,"row","mb-3","p-0","p-0"],["id","descripcion","rows","3","formControlName","descripcion","required","",1,"form-control"],["for","descripcion",1,"form-label"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],[4,"ngIf"],["id","exampleModalLabel",1,"modal-title","fs-5","m-0"],[1,"col-3","col-sm-3","m-0","p-0"],["type","text","id","id","formControlName","id","required","",1,"form-control-plaintext"],[3,"value"],["id","estadoIncidenteId","formControlName","estadoIncidenteId","required","",1,"form-select"],["for","estadoIncidenteId",4,"ngIf"],["for","estadoIncidenteId"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e.YNc(4,k,2,0,"h1",4),e.YNc(5,J,2,0,"h1",4),e.TgZ(6,"button",5),e.NdJ("click",function(){return i.cerrarModal()}),e.qZA()(),e.TgZ(7,"div",6)(8,"form",7),e.NdJ("ngSubmit",function(){return i.onSubmit()}),e.TgZ(9,"div",8),e.YNc(10,y,5,0,"div",9),e.TgZ(11,"div",10)(12,"div",11),e._UZ(13,"input",12),e.TgZ(14,"label",13),e._uU(15," Usuario:"),e.qZA()()(),e.TgZ(16,"div",10)(17,"div",11),e._UZ(18,"input",14),e.TgZ(19,"label",15),e._uU(20," Dependencia "),e.qZA()()()(),e.TgZ(21,"div",8)(22,"div",16)(23,"div",11),e._UZ(24,"input",17),e.TgZ(25,"label",18),e._uU(26,"Correo del Usuario"),e.qZA()()()(),e.TgZ(27,"div",8)(28,"div",19)(29,"div",20),e._UZ(30,"input",21),e.TgZ(31,"label",22),e._uU(32,"Nombre Incidente:"),e.qZA()()(),e.TgZ(33,"div",23)(34,"div",20)(35,"select",24)(36,"option",25),e._uU(37,"Seleccionar opci\xf3n"),e.qZA(),e.YNc(38,Q,2,2,"option",26),e.qZA(),e.TgZ(39,"label",27),e._uU(40,"Tipo Incidente:"),e.qZA()()(),e.YNc(41,L,7,2,"div",28),e.qZA(),e.TgZ(42,"div",29)(43,"div",11),e._UZ(44,"textarea",30),e.TgZ(45,"label",31),e._uU(46,"Descripcion:"),e.qZA()()()()(),e.TgZ(47,"div",32)(48,"button",33),e.NdJ("click",function(){return i.onSubmit()}),e.YNc(49,Y,2,0,"span",34),e.YNc(50,R,2,0,"span",34),e.qZA()()()()()),2&n&&(e.xp6(4),e.Q6J("ngIf",i.OnIncidente),e.xp6(1),e.Q6J("ngIf",!1===i.OnIncidente),e.xp6(3),e.Q6J("formGroup",i.miFormulario),e.xp6(2),e.Q6J("ngIf",i.OnIncidente),e.xp6(3),e.Q6J("value",i.usuarioRegistro.nombre),e.xp6(5),e.Q6J("value",i.usuarioRegistro.dependencia),e.xp6(6),e.Q6J("value",i.usuarioRegistro.correo),e.xp6(14),e.Q6J("ngForOf",i.TipoIncidentes),e.xp6(3),e.Q6J("ngIf",i.esAdmin),e.xp6(7),e.Q6J("disabled",i.miFormulario.invalid),e.xp6(1),e.Q6J("ngIf",i.OnIncidente),e.xp6(1),e.Q6J("ngIf",!1===i.OnIncidente))},dependencies:[l.sg,l.O5,a._Y,a.YN,a.Kr,a.Fj,a.EJ,a.JJ,a.JL,a.Q7,a.sg,a.u]}),t})();function D(t,o){1&t&&e._UZ(0,"i",15)}function w(t,o){1&t&&e._UZ(0,"i",16)}function B(t,o){1&t&&e._UZ(0,"i",17)}function j(t,o){1&t&&e._UZ(0,"i",18)}function z(t,o){1&t&&e._UZ(0,"i",19)}function G(t,o){1&t&&e._UZ(0,"i",20)}const K=function(t){return{"background-color":t}};let W=(()=>{class t{constructor(){this.incidentesService=(0,e.f3M)(T),this.authService=(0,e.f3M)(Z.e),this.incidentes=[],this.cantidad=0}ngOnInit(){if("ADMIN_ROLE"===this.authService.role())switch(this.EstadoIncidenteInput){case"Pendientes":this.incidentesService.getIncidentesPorTipoEstado(1,1,this.Estado).subscribe(({incidentesMy:n,incidentesMo:i,totalMYSQL:d,totalMongoDB:s})=>{n?(this.incidentes=n,this.cantidad=d):(this.incidentes=i,this.cantidad=s)});break;case"Resueltas":this.incidentesService.getIncidentesPorTipoEstado(1,2,this.Estado).subscribe(({incidentesMy:n,incidentesMo:i,totalMYSQL:d,totalMongoDB:s})=>{n?(this.incidentes=n,this.cantidad=d):(this.incidentes=i,this.cantidad=s)});break;case"Cerradas":this.incidentesService.getIncidentesPorTipoEstado(1,3,this.Estado).subscribe(({incidentesMy:n,incidentesMo:i,totalMYSQL:d,totalMongoDB:s})=>{n?(this.incidentes=n,this.cantidad=d):(this.incidentes=i,this.cantidad=s)})}else{let n=this.authService.usuarioLogueado();switch(this.EstadoIncidenteInput){case"Pendientes":this.incidentesService.getIncidentesPorUsuario(n.id,1,1,this.Estado).subscribe(({incidentesMy:i,incidentesMo:d,totalMYSQL:s,totalMongoDB:r})=>{i?(this.incidentes=i,this.cantidad=s):(this.incidentes=d,this.cantidad=r)});break;case"Resueltas":this.incidentesService.getIncidentesPorUsuario(n.id,1,2,this.Estado).subscribe(({incidentesMy:i,incidentesMo:d,totalMYSQL:s,totalMongoDB:r})=>{i?(this.incidentes=i,this.cantidad=s):(this.incidentes=d,this.cantidad=r)});break;case"Cerradas":this.incidentesService.getIncidentesPorUsuario(n.id,1,3,this.Estado).subscribe(({incidentesMy:i,incidentesMo:d,totalMYSQL:s,totalMongoDB:r})=>{i?(this.incidentes=i,this.cantidad=s):(this.incidentes=d,this.cantidad=r)})}}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["incidentes-card-info"]],inputs:{EstadoIncidenteInput:"EstadoIncidenteInput",Estado:"Estado",ColorTarjeta:"ColorTarjeta"},decls:18,vars:12,consts:[[1,"card","me-2",3,"ngStyle"],[1,"row","m-0","p-0","text-light","animate__animated","animate__fadeIn"],[1,"col-8","col-sm-9"],[1,"card-body","d-flex","justify-content-center","align-content-center","p-0","m-0"],[1,"col","text-start","p-0","m-0"],[1,"card-title","text-nowrap","d-none","d-sm-block"],[1,"card-title","d-block","d-sm-none"],[1,"card-text"],[1,"col-4","col-sm-3","d-flex","justify-content-center","align-items-center"],["class","d-none d-sm-block  fa fa-question fa-4x",4,"ngIf"],["class","d-block d-sm-none fa fa-question fa-2x",4,"ngIf"],["class","d-none d-sm-block  fa fa-check fa-4x",4,"ngIf"],["class","d-block d-sm-none fa fa-check fa-2x",4,"ngIf"],["class","d-none d-sm-block  fa fa-archive fa-4x",4,"ngIf"],["class","d-block d-sm-none fa fa-archive fa-2x",4,"ngIf"],[1,"d-none","d-sm-block","fa","fa-question","fa-4x"],[1,"d-block","d-sm-none","fa","fa-question","fa-2x"],[1,"d-none","d-sm-block","fa","fa-check","fa-4x"],[1,"d-block","d-sm-none","fa","fa-check","fa-2x"],[1,"d-none","d-sm-block","fa","fa-archive","fa-4x"],[1,"d-block","d-sm-none","fa","fa-archive","fa-2x"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5),e._uU(6),e.qZA(),e.TgZ(7,"h6",6),e._uU(8),e.qZA(),e.TgZ(9,"p",7),e._uU(10),e.qZA()()()(),e.TgZ(11,"div",8),e.YNc(12,D,1,0,"i",9),e.YNc(13,w,1,0,"i",10),e.YNc(14,B,1,0,"i",11),e.YNc(15,j,1,0,"i",12),e.YNc(16,z,1,0,"i",13),e.YNc(17,G,1,0,"i",14),e.qZA()()()),2&n&&(e.Q6J("ngStyle",e.VKq(10,K,i.ColorTarjeta)),e.xp6(6),e.hij(" Incidentes ",i.EstadoIncidenteInput," "),e.xp6(2),e.hij(" Incidentes ",i.EstadoIncidenteInput," "),e.xp6(2),e.Oqu(i.cantidad),e.xp6(2),e.Q6J("ngIf","Pendientes"===i.EstadoIncidenteInput),e.xp6(1),e.Q6J("ngIf","Pendientes"===i.EstadoIncidenteInput),e.xp6(1),e.Q6J("ngIf","Resueltas"===i.EstadoIncidenteInput),e.xp6(1),e.Q6J("ngIf","Resueltas"===i.EstadoIncidenteInput),e.xp6(1),e.Q6J("ngIf","Cerradas"===i.EstadoIncidenteInput),e.xp6(1),e.Q6J("ngIf","Cerradas"===i.EstadoIncidenteInput))},dependencies:[l.O5,l.PC],styles:["i[_ngcontent-%COMP%]{color:#fff}"]}),t})(),X=(()=>{class t{transform(n){const{inc_usuario:i,inc_usuarioRevision:d}=n;return i.correo===d.correo?"A la espera de Revision por parte de un Administrador":d.correo}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275pipe=e.Yjl({name:"revisionAdmin",type:t,pure:!0}),t})();function H(t,o){if(1&t&&(e.TgZ(0,"div",14),e._UZ(1,"incidentes-card-info",15),e.qZA()),2&t){const n=o.$implicit;e.xp6(1),e.Q6J("EstadoIncidenteInput",n.estadoIncidente)("Estado",n.estado)("ColorTarjeta",n.color)}}function V(t,o){1&t&&(e.TgZ(0,"button",16),e._UZ(1,"i",17),e.qZA())}function ee(t,o){1&t&&(e.TgZ(0,"th",10),e._uU(1,"Usuario"),e.qZA())}function te(t,o){1&t&&(e.TgZ(0,"th",10),e._uU(1,"Correo"),e.qZA())}function ne(t,o){1&t&&(e.TgZ(0,"th",10),e._uU(1,"Telefono"),e.qZA())}function ie(t,o){if(1&t&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&t){const n=e.oxw().$implicit;e.xp6(1),e.Oqu(n.inc_usuario.nombre)}}function oe(t,o){if(1&t&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&t){const n=e.oxw().$implicit;e.xp6(1),e.Oqu(n.inc_usuario.correo)}}function de(t,o){if(1&t&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&t){const n=e.oxw().$implicit;e.xp6(1),e.Oqu(n.inc_usuario.telefono)}}function se(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"tr",9)(1,"th",18),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.ALo(5,"titlecase"),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.YNc(8,ie,2,1,"td",19),e.YNc(9,oe,2,1,"td",19),e.YNc(10,de,2,1,"td",19),e.TgZ(11,"td"),e._uU(12),e.ALo(13,"revisionAdmin"),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.qZA(),e.TgZ(18,"td"),e._uU(19),e.ALo(20,"date"),e.qZA(),e.TgZ(21,"td")(22,"div",20)(23,"button",21),e.NdJ("click",function(){const s=e.CHM(n).$implicit,r=e.oxw();return e.KtG(r.editarIncidente(s))}),e._UZ(24,"i",22),e._uU(25," Editar "),e.qZA(),e.TgZ(26,"button",23),e.NdJ("click",function(){const s=e.CHM(n).$implicit,r=e.oxw();return e.KtG(r.eliminarIncidente(s))}),e._UZ(27,"i",24),e._uU(28," Eliminar "),e.qZA()()()()}if(2&t){const n=o.$implicit,i=e.oxw();e.xp6(2),e.Oqu(n.id),e.xp6(2),e.Oqu(e.lcZ(5,10,n.inc_nombre)),e.xp6(3),e.Oqu(n.inc_descripcion),e.xp6(1),e.Q6J("ngIf",i.esAdmin),e.xp6(1),e.Q6J("ngIf",i.esAdmin),e.xp6(1),e.Q6J("ngIf",i.esAdmin),e.xp6(2),e.Oqu(e.lcZ(13,12,n)),e.xp6(3),e.Oqu(n.inc_tipoIncidente.tinc_nombre),e.xp6(2),e.Oqu(n.inc_estadoIncidente.est_nombre),e.xp6(2),e.Oqu(e.lcZ(20,14,n.createdAt))}}let C=(()=>{class t{constructor(){this.infoIncidentesCard=[{estadoIncidente:"Pendientes",estado:!0,color:"#AF6C6C"},{estadoIncidente:"Resueltas",estado:!0,color:"#339966"},{estadoIncidente:"Cerradas",estado:!1,color:"gray"}],this.incidentes=[],this.authService=(0,e.f3M)(Z.e),this.incidentesService=(0,e.f3M)(T),this.router=(0,e.f3M)(v.F0),this.BDIncidente="",this.modalOn=!1,this.esAdmin=!1}ngOnInit(){"ADMIN_ROLE"===this.authService.role()&&(this.esAdmin=!0),this.obtenerIncidentes()}obtenerIncidentes(){if(!0===this.esAdmin&&this.incidentesService.getIncidentes().subscribe(({incidentesMy:n,incidentesMo:i})=>{n?(this.incidentes=n,this.BDIncidente="MYSQL"):(this.incidentes=i,this.BDIncidente="MONGO")}),!1===this.esAdmin){let n=this.authService.usuarioLogueado();this.incidentesService.getIncidentesPorUsuario(n.id,1,0,!0).subscribe(({incidentesMy:i,incidentesMo:d})=>{i?(this.incidentes=i,this.BDIncidente="MYSQL"):(this.incidentes=d,this.BDIncidente="MONGO")})}}editarIncidente(n){this.incidenteSeleccionado=n,this.modalOn=!0}eliminarIncidente(n){console.log("Clickeado editar",n.inc_descripcion),h().fire({title:"Seguro que desea eliminar el Incidente?",text:"No podra revertir esto.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, Eliminar incidente."}).then(i=>{i.isConfirmed&&this.incidentesService.borrarIncidente(n.id).subscribe(d=>{h().fire(`Incidente ${d.incidenteMy.inc_nombre} Eliminado!`,`${d.msg}`,"success").then(s=>{s.isConfirmed&&location.reload()})})})}onCloseModal(n){this.modalOn=n,this.incidenteSeleccionado=void 0}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-listado"]],decls:35,vars:9,consts:[[1,"container-fluid","p-0","m-0"],[1,"row","m-0","animate__animated","animate__fadeIn","d-flex","justify-content-center"],["class","col-3  me-2   pt-2 p-0",4,"ngFor","ngForOf"],[1,"row","d-flex","justify-content-around","m-0","p-0","animate__animated","animate__fadeIn"],[1,"col","p-2"],["type","button","class","btn btn-primary","data-bs-toggle","modal","data-bs-target","#Modal",4,"ngIf"],[1,"col","d-flex","justify-content-end","p-2"],[1,"table-responsive"],[1,"table","table-bordered","table-hover","text-center","animate__animated","animate__fadeIn"],[1,"animate__animated","animate__fadeIn"],["scope","col"],["scope","col",4,"ngIf"],["class","animate__animated animate__fadeIn ",4,"ngFor","ngForOf"],[3,"IncidenteInput","BDIncidente","esAdmin","closeModal"],[1,"col-3","me-2","pt-2","p-0"],[3,"EstadoIncidenteInput","Estado","ColorTarjeta"],["type","button","data-bs-toggle","modal","data-bs-target","#Modal",1,"btn","btn-primary"],[1,"bi","bi-plus-lg"],["scope","row"],[4,"ngIf"],[1,"d-flex"],["type","button","data-bs-toggle","modal","data-bs-target","#Modal",1,"btn","btn-sm","backgroundColor","text-light",3,"click"],["aria-hidden","true",1,"fa","fa-pencil"],["type","button",1,"btn","btn-sm","btn-danger",3,"click"],["aria-hidden","true",1,"fa","fa-trash-o"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,H,2,3,"div",2),e.qZA(),e.TgZ(3,"div",3)(4,"div",4)(5,"h3"),e._uU(6,"Incidentes"),e.qZA(),e.YNc(7,V,2,0,"button",5),e.qZA(),e._UZ(8,"div",6),e.qZA(),e.TgZ(9,"div",7)(10,"table",8)(11,"thead")(12,"tr",9)(13,"th",10),e._uU(14,"#"),e.qZA(),e.TgZ(15,"th",10),e._uU(16,"Nombre"),e.qZA(),e.TgZ(17,"th",10),e._uU(18,"Descripcion"),e.qZA(),e.YNc(19,ee,2,0,"th",11),e.YNc(20,te,2,0,"th",11),e.YNc(21,ne,2,0,"th",11),e.TgZ(22,"th",10),e._uU(23,"Usuario Revision"),e.qZA(),e.TgZ(24,"th",10),e._uU(25,"Tipo "),e.qZA(),e.TgZ(26,"th",10),e._uU(27,"Estado "),e.qZA(),e.TgZ(28,"th",10),e._uU(29,"Fecha Creacion"),e.qZA(),e.TgZ(30,"th",10),e._uU(31,"Acciones"),e.qZA()()(),e.TgZ(32,"tbody"),e.YNc(33,se,29,16,"tr",12),e.qZA()()(),e.TgZ(34,"app-incidenteModal",13),e.NdJ("closeModal",function(s){return i.onCloseModal(s)}),e.qZA()()),2&n&&(e.xp6(2),e.Q6J("ngForOf",i.infoIncidentesCard),e.xp6(5),e.Q6J("ngIf",!i.esAdmin),e.xp6(12),e.Q6J("ngIf",i.esAdmin),e.xp6(1),e.Q6J("ngIf",i.esAdmin),e.xp6(1),e.Q6J("ngIf",i.esAdmin),e.xp6(12),e.Q6J("ngForOf",i.incidentes),e.xp6(1),e.Q6J("IncidenteInput",i.incidenteSeleccionado)("BDIncidente",i.BDIncidente)("esAdmin",i.esAdmin))},dependencies:[l.sg,l.O5,P,W,l.rS,l.uU,X],styles:[".btn[_ngcontent-%COMP%]{margin-right:10px;display:flex;flex-direction:row;justify-content:center;align-items:center}.fa[_ngcontent-%COMP%]{margin-right:10px}body[_ngcontent-%COMP%]{margin:0!important}.backgroundColor[_ngcontent-%COMP%]{background-color:#3086f2}"]}),t})();const ae=[{path:"",component:C,children:[{path:"listado",component:C},{path:"**",redirectTo:"listado"}]}];let ce=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[v.Bz.forChild(ae),v.Bz]}),t})(),re=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[l.ez,ce,U.m,a.UX,q.D]}),t})()}}]);